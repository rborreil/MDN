<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Intro - JS Asynchrone</title>
</head>

<body>
    <!-- <label for="quota">Quantité de nombres premiers :</label>
    <input type="text" id="quota" name="quota" value="1000000" />

    <button id="generer">Générer des nombres premiers</button>
    <button id="recharger">Recharger</button>

    <div id="output"></div> -->

    <script>
        // PROGRAMMATION SYNCHRONE
        /* function creerSalutation(nom){
            return `Bonjour, je m'appelle ${nom} !`;
        }

        const nom = "Miriam";
        const salutation = creerSalutation(nom);
        console.log(salutation); */

        // FONCTION SYNCHRONE LONGUE
        /* function genererNbPremiers(quota) {
            function estPremier(n) {
                for (let c = 2; c <= Math.sqrt(n); ++c) {
                    if (n % c === 0) {
                        return false;
                    }
                }
                return true;
            }

            const nbPremiers = [];
            const maximum = 1000000;

            while (nbPremiers.length < quota) {
                const candidat = Math.floor(Math.random() * (maximum + 1));
                if (estPremier(candidat)){
                    nbPremiers.push(candidat);
                }
            }
            return nbPremiers;
        }

        document.querySelector("#generer").addEventListener("click", () => {
            const quota = document.querySelector("#quota").value;
            const nbPremiers = genererNbPremiers(quota);
            document.querySelector("#output").textContent = `Génération de ${quota} nombres premiers terminée !`;
        });

        document.querySelector("#recharger").addEventListener("click", () => {
            document.location.reload();
        }); */

        // FONCTIONS DE RAPPEL (CALLBACKS)
        // Synchrone compréhensible
        /* function faireEtape1(init) {
            return init + 1;
        }

        function faireEtape2(init) {
            return init + 2;
        }

        function faireEtape3(init) {
            return init + 3;
        }

        function faireOperation() {
            let resultat = 0;
            resultat = faireEtape1(resultat);
            resultat = faireEtape2(resultat);
            resultat = faireEtape3(resultat);
            console.log(`Résultat : ${resultat}`);
        }

        faireOperation(); */

        // Implémentation avec callbacks
        function faireEtape1(init, callback) {
            const resultat = init + 1;
            callback(resultat);
        }

        function faireEtape2(init, callback) {
            const resultat = init + 2;
            callback(resultat);
        }

        function faireEtape3(init, callback) {
            const resultat = init + 3;
            callback(resultat);
        }

        function faireOperation() {
            faireEtape1(0, (resultat1) => {
                console.log(resultat1);
                faireEtape2(resultat1, (resultat2) => {
                    console.log(resultat2);
                    faireEtape3(resultat2, (resultat3) => {
                        console.log(`Résultat : ${resultat3}`);
                    });
                });
            });
        }

        faireOperation();
    </script>
</body>

</html>